---
title: "Evolving Gender Representation in Canadian Municipal Elections"
subtitle: "Analyzing Female Candidate Success Over Time and the Role of Incumbency in Electoral Outcomes"
author: 
  - Hanqing Yang
thanks: "Code and data are available at: [https://github.com/Lorina-Y/Canadian_Municipal_election.git]."
date: today
date-format: long
abstract: "This paper investigates the impact of gender and incumbency on the likelihood of candidates being elected in Canadian municipal elections, with a focus on how these dynamics have changed over time, and provide a model for predict future success rate. The results show that while female candidates historically faced significant disadvantages, their chances of being elected have improved steadily in recent decades, and incumbency remains a powerful predictor of electoral success, though it disproportionately benefits male candidates. These findings highlight progress toward gender equity in municipal elections but emphasize the need to address persistent structural barriers to achieve full political representation. This study provides evidence to inform policymakers and governments on strategies to promote equitable representation in local politics, ensuring a more inclusive and democratic political system in Canada."
format: pdf
toc: true
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(ggplot2)
library(dplyr)
library(ggmosaic)
library(knitr)
library(kableExtra)
library(patchwork)
library(modelsummary)
library(arrow)
library(pROC)
library(car)
library(arm)
library(scales)
library(boot)

data <- read_parquet("../data/02-analysis_data/analysis_data.parquet")
train_data <- read_parquet("../data/02-analysis_data/train_data.parquet")
test_data <- read_parquet("../data/02-analysis_data/test_data.parquet")


```


# Introduction {#sec-intro}

## Overview
The representation of women in politics is a key measure of societal progress and gender equality, reflecting broader social and political dynamics. Canadian municipalities play an important role in shaping local policies and fostering political leadership, serving as a foundation for inclusive governance and pathways to higher political office.  Understanding gender disparities in this context is important for fostering inclusivity. While previous research has broadly addressed gender representation in politics, there remains a need to explore the factors influencing electoral success and how female representation in the Canadian local government has evolved over time. This study focuses on Canadian municipal elections, providing a view into gender dynamics at the local level.

This paper investigates the impact of gender and incumbency status on electoral outcomes in Canadian municipal elections, with a focus on how these dynamics have evolved over time. Using data from the Canadian Municipal Elections Database (CMED) [@CMED], which spans from 1862 to 2022 and includes candidate gender, incumbency status, election outcomes, and election years. The model analysis excludes pre-1910 data due to the absence of female candidates before that year. A logistic regression model with interaction terms, including gender with election year and gender with incumbency, is employed to assess the direct effects of gender and incumbency while examining how these effects vary across time. This approach provides a detailed view of historical shifts and contemporary patterns in gender representation, emphasizing both the structural barriers and progress toward gender equity in local governance.

## Estimand
This study estimates the relationship between candidate identity factors 'gender' and 'incumbency status', and election success in Canadian municipal elections, incorporating interactions between gender and election year, as well as gender and incumbency. The inclusion of interaction terms allows for the analysis of both the main effects and the evolution of these relationships over time. The objective is to identify trends and key factors influencing electoral success, with a focus on shifting gender dynamics and the impact of incumbency.

## Results and Importance
The findings show that while female candidates have historically faced significant disadvantages, their success rates have improved steadily over time, especially for non-incumbent candidates. Additionally, incumbency remains a strong predictor of electoral success, though male candidates benefit more from this advantage. These results highlight both progress and persistent barriers in achieving gender equity in municipal elections. This study provides evidence to inform policymakers and advocates on strategies for promoting gender-inclusive representation in local governance, contributing to broader efforts toward equality.

## Paper Structure
The paper is structured as follows: After the introduction in @sec-intro, the data section @sec-data provides an overview of the dataset. The model specification is detailed in @sec-model, where the logistic regression framework and its statistical rationale are explained. The results are presented in @sec-result, highlighting key trends and patterns related to gender and electoral outcomes in Canadian municipal elections. @sec-discussion interprets the findings in depth, within the broader context of gender representation in local politics, explain limitations and offering directions for future research. And appendix @sec-appendix1 give aspect of measurement of the dataset and idealized methodology. @sec-data-details provide additional details of data and data cleaning process, @sec-model-details provide the model summary and validation.


# Data {#sec-data}

## Overview
I use the statistical programming language R [@citeR] to analyze the Canadian Municipal Elections Data(CMED). The dataset was obtained from the Borealis website [@CMED] as of November 22, 2024. The website offer the dataset in the original format and Archival format, I chosen to use the Archival format for its smaller size and pre-cleaned, standardized structure, which simplifies analysis while retaining all relevant variables, consists of complete municipal election results for municipalities across Canada.

This raw dataset includes 110,800 observations and 19 variables. It provides detailed records of candidates in Canadian municipal elections. Each observation covering candidate detail such as name, incumbency status, gender, and election context across different provinces and years, The selection of dataset was motivated by its direct relevance to the research question, since it forming the foundation for my investigation into gender disparities and electoral trends. Initial data processing involving eliminate data irrelevant to my focus, and I removed observations with missing values and duplicate rows to ensure reliable and efficient analysis, retaining 84,028 records from various regions across Canada, ensuring high generalizability. More detail on data cleaning is included under @sec-data-details.

While similar datasets exist at the provincial level (e.g., CivicInfoBC or Élections Québec), CMED stands out for its national scope, since provincial election results lack nationwide coverage and some of them missing gender data, making them unsuitable for studying gender representation in all local municipalities across Canada.

Following statistical methods from "Telling Stories with Data" [@tellingstories], I investigate the effect of gender and incumbency status on election outcomes and examine interaction between 'gender * election year' and 'gender * incumbent' to analyze trends in female representation over time.

## Software, data and packages used
I use the statistical programming language R [@citeR], data from [@CMED], and following packages: ggplot2 [@ggplot2], ggmosaic [@ggmosaic], modelsummary [@modelsummary], kableExtra [@kableExtra], knitr [@knitr], arrow [@arrow], and the data cleaning use package tidyverse [@tidyverse], dplyr [@dplyr], janitor [@janitor], rsample [@rsample], pROC [@pROC], car [@car], arm [@arm], scales [@scales], boot [@boot].


## Measurement
The Canadian Municipal Elections Database (CMED) captures real-world electoral phenomena through a combination of official records, archival materials, and manual coding. For instance, the `gender` variable sometimes are missing in original datasets, particularly for historical records. In these cases, gender was coded manually using candidate photographs, self-descriptions, and pronoun usage from online sources, ensuring accurate representation. Similarly, `incumbent` status, which identifies whether a candidate held the same office prior to the election, was verified through official election results and cross-referenced with newspaper archives, such as the *Calgary Herald* and *Edmonton Journal*, providing a reliable measure of incumbency.

The `elected` variable reflects whether a candidate won (`1`) or lost (`0`), directly measuring electoral success. For example, in Quebec and British Columbia, provincial databases provided detailed election results, while in cities like Toronto and Montreal, election data were manually digitized from archived municipal records. These processes converted fragmented and varied election results into a standardized dataset, ensuring a consistent and accurate representation of municipal elections across Canada.

## Variables
### Constructed variable
A constructed variable, `predicted_prob`, was added to the test dataset to represent the predicted probability of election success for each candidate. This variable was generated using the logistic regression model and predict() function, allowing for direct comparison between predicted probabilities and actual election outcomes for model validation. Additionally, it facilitates analyses of how predicted success rates vary across key factors such as gender, incumbency, and election year, aligning with my study’s aim to explore the dynamics influencing electoral success.

### Outcome variables
```{r,fig.height= 5, fig.width = 8}
#| label: tbl-elected
#| tbl-cap: Distribution of candidates' elected outcome from 1867 to 2022:approximatly half-half split in 'elected' and 'non-elected'.
#| echo: false

# Load scales library for comma formatting
# library(scales)

# Summary table
outcome_summary <- data |>
  group_by(elected) |>
  summarise(
    Count = n(),
    Percentage = round((n() / nrow(data)) * 100, 2)
  ) |>
  mutate(
    Count = comma(Count),  # Add comma separator to Count
    Elected_Status = ifelse(elected == 1, "Elected", "Not Elected")
  ) |>
  dplyr::select(Elected_Status, Count, Percentage) |>
  bind_rows(
    tibble(
      Elected_Status = "Total",
      Count = comma(nrow(data)),  # Add comma separator to total
      Percentage = 100
    )
  )

knitr::kable(outcome_summary)

```

```{r}
#| label: fig-elected
#| fig-cap:  "Distribution of elected status ('Elected' and 'Not Elected') by gender ('Male' and 'Female'): higher proportions of male candidates in each elected category, with percentages of male/female candidate being elected/not elected annotated."
#| echo: false
#| warning: false
#| message: false

# Load necessary libraries
# library(ggmosaic)
# library(ggplot2)
# library(dplyr)

# Calculate percentages to label on the mosaic plot

# 1. Percentage of male and female in the election race
gender_race_percentage <- data |>
  group_by(gender) |>
  summarise(Count = n(), .groups = "drop") |>
  mutate(
    Total = sum(Count),
    Percentage = round((Count / Total) * 100, 1),
    Gender = ifelse(gender == 0, "Male", "Female")
  )

# 2. Percentage of male and female being elected
elected_percentage <- data |>
  filter(elected == 1) |>
  group_by(gender) |>
  summarise(Count = n(), .groups = "drop") |>
  mutate(
    Total = sum(Count),
    Percentage = round((Count / Total) * 100, 1),
    Gender = ifelse(gender == 0, "Male", "Female"),
    elected_status = "Elected"
  )

# 3. Percentage of male and female being not elected
not_elected_percentage <- data |>
  filter(elected == 0) |>
  group_by(gender) |>
  summarise(Count = n(), .groups = "drop") |>
  mutate(
    Total = sum(Count),
    Percentage = round((Count / Total) * 100, 1),
    Gender = ifelse(gender == 0, "Male", "Female"),
    elected_status = "Not Elected"
  )

# Combine percentages for annotation
percentages <- bind_rows(elected_percentage, not_elected_percentage)

# Adjust positions for annotations
percentages <- percentages |>
  mutate(
    x = ifelse(elected_status == "Not Elected", 0.25, 0.75), # Assign x position for "Not Elected" and "Elected"
    y = ifelse(Gender == "Male", 0.25, 0.9), # Assign y position for "Male" and "Female" within each category
    Label = paste0(Percentage, "%") # Create label with percentage
  )

# Create the mosaic plot with percentage labels
ggplot(data = data) +
  geom_mosaic(aes(x = product(elected), fill = gender)) +
  geom_text(
    data = percentages,
    aes(
      x = x,
      y = y,
      label = Label
    ),
    color = "white",
    size = 6
  ) +
  labs(
    title = "Mosaic Plot of Elected Status by Gender",
    x = "Elected Status",
    fill = "Gender"
  ) +
  scale_x_productlist(labels = c("0" = "Not Elected", "1" = "Elected")) +
  scale_fill_manual(values = c("blue", "pink"), labels = c("Male", "Female")) +
  theme_minimal()


```
The **outcome variable** in this study is `elected`, which indicates whether a candidate was successfully elected (`1`) or not (`0`) in a given municipal race. This variable is available for all observations in the Canadian Municipal Elections Database (CMED) and captures the fundamental result of each race. @tbl-elected shows 51.68% of candidates were elected, while 48.32% were not, providing a relatively balanced outcome for analysis.

The variable is important for this study as it allows the examination of factors influencing electoral success, such as gender, incumbency, and election year, and enables an investigation into how gender dynamics have evolved over time. By analyzing the patterns in `elected`, the study aims to understand broader trends in gender representation and equality across the Canadian municipal elections. 

@fig-elected visualizes the outcome variable `elected`, depicting the proportion of candidates by gender across "Elected" and "Not Elected" categories. It highlights the gender distribution in electoral outcomes, show that among those elected, 73.8% are male and 26.2% are female, imply a notable gender imbalance in local government representation in Canada.

### Predictor variables
#### Gender
```{r,fig.height= 5, fig.width = 8}
#| label: tbl-gender
#| tbl-cap: Distribution of candidates' gender in CMED dataset, including the total number and percentage of female and male, along with an overall total rows.
#| echo: false

gender_summary <- data |>
  group_by(gender) |>
  summarise(
    Count = n(),
    Percentage = round((n() / nrow(data)) * 100, 2)
  ) |>
  mutate(
    Count = comma(Count),  # Add comma separator to Count
    Gender = ifelse((gender) == 1, "Female", "Male")
  ) |>
  dplyr::select(Gender, Count, Percentage) |>
  bind_rows(
    tibble(
      Gender = "Total",
      Count = comma(nrow(data)),  # Add comma separator to total
      Percentage = 100
    )
  )

knitr::kable(gender_summary)
```

```{r,fig.height= 7, fig.width = 8}
#| label: fig-gender
#| fig-cap:  "Gender distribution of candidates in Canadian municipal elections (1862–2022): show a notable imbalance in gender distribution, 75.8% male and 24.2% female, with males outnumbering females 3 to 1."
#| echo: false
#| warning: false
#| message: false

# Load necessary libraries
# library(ggplot2)
# library(dplyr)

# Summarize the gender variable
gender_summary <- data |>
  group_by(gender) |>
  summarise(Frequency = n()) |>
  mutate(
    Percentage = round((Frequency / sum(Frequency)) * 100, 1),
    Label = paste0(Percentage, "%")
  )

# Create the bar plot
ggplot(gender_summary, aes(x = gender, y = Frequency, fill = gender)) +
  geom_bar(stat = "identity", show.legend = FALSE) +
  geom_text(aes(label = Label), vjust = -0.5, size = 5) +
  labs(
    title = "Gender Distribution",
    x = "Gender",
    y = "Count"
  ) +
  scale_fill_manual(values = c("blue", "pink"), labels = c("Male", "Female")) +
  theme_minimal()

```
The `gender` variable captures the candidate's gender and is included in the full Canadian Municipal Elections Database (CMED). It is coded as a binary factor (`Female = 1`, `Male = 0`) to facilitate analysis of the baseline gender effect on election outcomes. Despite minor missing data in raw dataset due to incomplete candidate name information, this variable serves as a key predictor for examining the influence of gender on electoral success.

@tbl-gender and @fig-gender illustrates the distribution of gender among candidates in Canadian municipal election races, show a notable gender imbalance in the Canadian municipal elections. Specifically, 75.8% of candidates are male, while only 24.2% are female, highlighting the underrepresentation of women in local government elections.


#### Incumbent

```{r,fig.height= 5, fig.width = 8}
#| label: tbl-incumbent
#| tbl-cap: Distribution of candidates' incumbency status in CMED, including the total number and percentage of candidates who were incumbent and non-incumbent before election, along with an overall total rows.
#| echo: false

incumbent_summary <- data |>
  group_by(incumbent) |>
  summarise(
    Count = n(),
    Percentage = round((n() / nrow(data)) * 100, 2)
  ) |>
  mutate(
    Count = comma(Count),  # Add comma separator to Count
    Incumbency_status = ifelse((incumbent) == 1, "Incumbent", "Not Incumbent")
  ) |>
  dplyr::select(Incumbency_status, Count, Percentage) |>
  bind_rows(
    tibble(
      Incumbency_status = "Total",
      Count = comma(nrow(data)),  # Add comma separator to total
      Percentage = 100
    )
  )

knitr::kable(incumbent_summary)
```

```{r}
#| label: fig-incumbent
#| fig-cap: Visualizing the relationship between elected status ("Elected" and "Not Elected") and incumbency status ("Not Incumbent" in yellow and "Incumbent" in green), highlighting the distribution of incumbents and non-incumbents across election outcomes.
#| echo: false
#| warning: false
#| message: false

# mosaic plot for visualizing incumbent variable
ggplot(data = data) +
  geom_mosaic(aes(x = product(elected), fill = incumbent)) +
  labs(title = "Elected Status by incumbent",
       x = "Elected Status",
       fill = "incumbent") +
  scale_x_productlist(labels = c("0" = "Not Elected", "1" = "Elected")) +
  scale_fill_manual(values = c("yellow", "lightgreen"),
                    labels = c("not incumbent", "incumbent")) +
  theme_minimal()

```
The **incumbent** variable (`Incumbent = 1`, `Not Incumbent = 0`) identifies whether a candidate held the same office prior to the election and is available for the full CMED dataset. Incumbency is a key predictor of electoral success, often linked to advantages like name recognition, experience, and access to resources. 

As shown in @tbl-incumbent, 65.91% of candidates were not incumbents at the time of their election bid, while 34.09% were. This suggests that the majority of candidates competing in municipal elections are challengers rather than current officeholders. Furthermore, @fig-incumbent highlights that incumbents have a significantly higher likelihood of being elected compared to non-incumbents, emphasizing the electoral advantage conferred by holding office.

#### Election Year
```{r}
#| label: fig-year
#| fig-cap:  "Showing the number of male and female candidates in Canadian municipal elections over time(1862-2022): a sharp increase in candidate participation post-2000 and a persistent gender gap, with male candidates consistently outnumbering female candidates."
#| echo: false
#| warning: false
#| message: false

# Count candidates by election year and gender
yearly_counts <- data |>
  group_by(election_year, gender) |>
  summarise(Count = n(), .groups = "drop")

# Line plot for visulizing election_year
ggplot(yearly_counts, aes(x = election_year, y = Count, color = gender, group = gender)) +
  geom_line(size = 1) +
  scale_color_manual(values = c("skyblue", "pink"), labels = c("Male", "Female")) +
  labs(
    title = "Number of Candidates Over Time by Gender",
    x = "Election Year",
    y = "Number of Candidates",
    color = "Gender"
  ) +
  theme_minimal()


earliest_years <- data |>
  group_by(gender) |>
  summarise(Earliest_Year = min(election_year, na.rm = TRUE))


```

The **election_year** variable records the year of each election, important for analyzing trends in outcomes, participation, and gender representation. It interacts with gender in the model to capture changes over time. 
As shown in (@fig-year), candidate numbers surged after 2000, with male candidates consistently outnumbering females. From 1867 to 1910, only men participated in municipal elections, but women began running thereafter, marking a key shift in gender representation.

```{r}
#| label: tbl-summaryx
#| tbl-cap: Descriptive summary for predictor variables, including the counts and proportions of female and male candidates, incumbent and non-incumbent candidates, and the range of election years covered in the dataset.
#| echo: false
#| warning: false
#| message: false

# Generate summary for each predictor
summary_x <- data |>
  summarise(
    # Gender
    Number_of_Female = sum(gender == 1, na.rm = TRUE),
    Number_of_Male = sum(gender == 0, na.rm = TRUE),
    Female_Proportion = round(mean(gender == 1, na.rm = TRUE) * 100, 2),
    
    # Incumbent
    Incumbent_number = sum(incumbent == 1, na.rm = TRUE),
    Non_Incumbent_number = sum(incumbent == 0, na.rm = TRUE),
    Incumbent_Proportion = round(mean(incumbent == 1, na.rm = TRUE) * 100, 2),
    
    # Election Year
    Min_Election_Year = min(election_year, na.rm = TRUE),
    Max_Election_Year = max(election_year, na.rm = TRUE)
  ) |>
  pivot_longer(cols = everything(), names_to = "Variable", values_to = "Value") 

# Add formatting for display
summary_x <- summary_x |>
  mutate(
    Value = ifelse(grepl("Proportion|Year", Variable),
                   as.character(Value),  # Keep proportions and years as-is
                   scales::comma(Value))  # Add commas for counts
  )

# Print the summary table
knitr::kable(summary_x)


```

The table @tbl-summaryx gives a summary for important feature of this 3 predictor variables: gender, incumbent and election_year.

#### Interaction term
**Gender * Election Year**
```{r}
#| label: fig-gender_year
#| fig-cap: "Showing the proportion of candidates elected over time by gender, with separate lines for male (blue) and female (pink) candidates, highlighting trends in election success: female candidates often achieve higher success rates, with greater year-to-year variation."
#| echo: false
#| warning: false
#| message: false


# Calculate proportions of elected by gender and year
# library(dplyr)
# library(tidyr)

gender_year_data <- data |>
  group_by(election_year, gender) |>
  summarise(Proportion_Elected = mean(elected == 1),  
            .groups = "drop") |>
  mutate(gender = factor(gender, labels = c("Male", "Female")))



ggplot(gender_year_data, aes(x = election_year, y = Proportion_Elected, color = gender, group = gender)) +
  geom_line(size = 1) +
  scale_color_manual(values = c("blue", "pink"), labels = c("Male", "female")) +
  labs(
    title = "Proportion of Candidates Elected Over Time by Gender",
    x = "Election Year",
    y = "Proportion Elected",
    color = "Gender"
  ) +
  theme_minimal()

```
The interaction between gender and election_year shows how the relationship between gender and electoral success has evolved over time. It is important for understanding whether gender disparities in municipal elections have diminished, persisted, or shifted in favor of inclusivity.

@fig-gender_year shows the proportion of male and female candidates elected over time, highlighting shifts in gender disparities. While male candidates participation consistently outnumber females, female candidates often achieve higher success rates, though with greater year-to-year variation. And male candidates show more stable but lower success proportions in recent years, reflecting a narrowing gender gap. The absence of female data before 1910 aligns with historical restrictions on women's participation in elections, emphasizing the evolving trends in gender representation.

**Gender * Incumbent**
```{r}
#| label: fig-gender_incumbent
#| fig-cap: Displaying the proportion of election outcomes ("Elected" vs. "Not Elected") by gender ("Male" and "Female") and incumbency status, highlighting that incumbency increases the likelihood of being elected and affects male and female candidates differently.
#| echo: false
#| warning: false
#| message: false

# Faceted bar chart
ggplot(data, aes(x = gender, fill = as.factor(elected))) +
  geom_bar(position = "fill", color = "grey") +
  facet_wrap(~incumbent, labeller = labeller(incumbent = c("0" = "Not Incumbent", "1" = "Incumbent"))) +
  scale_fill_manual(values = c("yellow", "lightgreen"), labels = c("Not Elected", "Elected")) +
  scale_x_discrete(labels = c("0" = "Male", "1" = "Female")) +
  labs(
    title = "Elected Outcomes by Gender and Incumbency",
    x = "Gender",
    y = "Proportion",
    fill = "Elected Status"
  ) +
  theme_minimal()

```
The interaction term `gender * incumbent` examines how incumbency status influences election outcomes for male and female candidates. This term allow us to understand whether the incumbency advantage differs by gender, highlighting disparities in electoral success.

@fig-gender_incumbent shows the proportion of elected outcomes by gender, split by incumbency status. Among non-incumbents, both male and female candidates show low success rates, with male candidates being slightly less likely to be elected. while among incumbents, the election success rates for both genders are substantially higher, indicating incumbency strongly enhances electoral success for both genders but suggests potential differences in how gender interacts with incumbency.


# Model {#sec-model}
The goal of our modelling strategy is to use logistic regression model to investigate the relationship between Canadian Municipal Election outcome and the gender, incumbency status of candidate, and compare the difference in predicted probability of election success rate across gender over time.

Model detail, validation and diagnostics are included in [Appendix -@sec-model-details].


## Alternative model
A Bayesian approach was considered but rejected primarily due to computational impracticality with 55,961 training observations. While Frequentist logistic regression offers a more efficient alternative, providing stable maximum likelihood estimates for large datasets. Additionally, the lack of well-informed priors reduced the potential benefits of Bayesian modeling, making the frequentist approach a simpler and more practical choice.

Additionally, a simpler **base model** with three predictors—gender, incumbent, and election_year was considered to explore main effects, but not used because it assumes static and independent effects. This assumption contradicts EDA findings, which shown a relationship between gender and election_year (@fig-gender_year). The full model, with interaction terms (gender × election_year and gender × incumbent), was used to capture the evolving gender gap and its variation with incumbency. Without these interactions, the base model could not adequately address the study's aim of analyzing how gender dynamics in electoral success have changed over time. Thus, the full model was chosen for its ability to provide deeper understandings.

## Model Set-up
A logistic regression model was chosen to analyze the binary response variable (`elected`), which follows a Bernoulli distribution, indicating whether a candidate was successfully elected (`elected = 1`) or not (`elected = 0`) in a municipal election. This method models the probability of being elected by applying the logit link function, which maps the linear combination of predictors onto a probability scale, ensuring the predicted probabilities lie between 0 and 1.

I fit a model with two main predictors **gender** and **incumbent**, and two interaction terms including **gender * election_year** and **gender * incumbent**. 

The model use following predictors:

   - **gender**: categorical variable record candidates' gender, 1 for female, 0 for male. Use to analyze the influence of gender on electoral success.

   - **incumbent**: categorical variable to account for the incumbency advantage, 1 for incumbent, 0 for not incumbent.

   - **Interactions**:

     - **gender * election_year**: To assess whether the gender effect has changed over time.

     - **gender * incumbent**: To examine whether incumbency impacts male and female candidates differently.

**Model**
\begin{align*}
    elected_i &\sim \text{Bernoulli}(\text{Pr}(elected_i = 1)) \\
    \text{logit}(\text{Pr}(elected_i = 1)) &= \beta_0 + \beta_1 \cdot \text{gender}_i + \beta_2 \cdot \text{incumbent}_i \\
    &\quad + \beta_3 \cdot (\text{gender}_i \times \text{election\_year}_i) + \beta_4 \cdot (\text{gender}_i \times \text{incumbent}_i) 
\end{align*}

\textbf{Where:}
\begin{itemize}
    \item $\beta_0$ is the intercept term, represents the baseline log-odds of being elected when all predictors are at their reference level.
    \item $\beta_1, \beta_2, \beta_3, \beta_4$ are the coefficients for each predictor, correspond to the effects of the predictors on the log-odds of being elected
\end{itemize}

This modeling approach allows for an exploration of both the main effects and the potential interactions between gender, incumbency, and time. It allow investigation of effect of candidate's gender and incumbency status on election outcome, and also explain how gender dynamics in elections have evolved over time and how incumbency advantages differ between male and female candidates. Additionally, the model can also be used to predict the outcomes of future Canadian municipal elections, providing a tool for forecasting and enabling further analysis and comparison of gender effects on election success over time.

Since I found in the data section that female candidates' data are missing before 1910 (@fig-gender_year), the model is fit using only data with `election_year >= 1910` to ensure the analysis accurately captures gender differences in election success within a time frame where both male and female candidates actively participated.

I run the model in R [@citeR] by using the function glm() to build a logistic regression model on training data.
```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
# Load the model
model <-
  readRDS(file = here::here("models/model.rds"))
```


## Model justification
Existing research and political science theories suggest that factors such as candidate gender, incumbency status, and the year of the election can influence electoral outcomes in Canadian municipal elections. Historically, male candidates have historically been more likely to succeed than female candidates, particularly in earlier years, highlighting persistent gender disparities in political representation. Incumbents benefit from name recognition, political experience, and access to resources, giving them a substantial advantage in elections. Over time, societal shifts toward inclusivity and equity are hypothesized to reduce these disparities, which motivates the inclusion of interaction terms, such as between gender and election year. Similarly, the interaction between gender and incumbency allows for assessing whether the advantage of incumbency is distributed equitably across genders. These predictors were selected based on their relevance to the research question and their clear definition in the data section.

A logistic regression model was used because the response variable—whether a candidate is elected—is binary, making it well-suited to a Bernoulli distribution. Logistic regression is ideal for modeling binary outcomes as a function of multiple predictors, providing interpretable log-odds of being elected. The inclusion of interaction terms enables an exploration of changing gender dynamics over time and across incumbency statuses, aligning with the study's objective to examine how gender and other election factors jointly influence electoral success.

The model balances complexity by including theoretically motivated interaction terms while excluding unnecessary predictors like **`election_year`**, instead capturing its effect through interactions, reduce multicollinearity unrelated to the study's aim. This approach provides an understanding of the interplay between gender, incumbency, and election year, enabling deeper analysis of factors influencing electoral outcomes. 

However, there are limitation of the model. The logistic regression model assumes a linear relationship between predictors and the log-odds of being elected. While appropriate for gender, incumbency, and their interactions, this assumption may oversimplify complex relationships, such as regional or socioeconomic factors not captured in the dataset. Additionally, the inclusion of interaction terms inherently increases the risk of multicollinearity, particularly between gender and its interaction with election year. This can lead to inflated standard errors, making coefficient interpretation more challenging.

Another assumption is the independence of observations. This is generally valid for election data but may be violated in cases where candidates are clustered within the same municipality or election year. Such clustering could introduce correlation among observations, leading to biased standard errors.

More details about the model validation and checking is in @sec-model-details.

# Results {#sec-result}

## Interpretation of coefficient 
```{r}
#| label: tbl-modelresult
#| fig-cap: Summary of coefficients and fit statistics for the logistic regression models predicting election probability.
#| echo: false
#| warning: false
#| message: false

# Generate the table
modelsummary(
  list("Logistic Regression Model" = model),
  fmt = 2
)
```

Our results are summarized in @tbl-modelresult using the [@modelsummary] package. The logistic regression model evaluates the impact of gender, incumbency, and their interactions influence electoral success and highlights key variations over time in Canadian municipal elections.

The **Intercept** (-8.13, SE = 0.78) represents the baseline log-odds of election success for non-incumbent male candidates at the reference election year. The coefficient for **`gender1`** (-23.46, SE = 3.15) represents the log-odds difference in election probability between female (gender = 1) and male (gender = 0) candidates when all other predictors (such as incumbency and interactions) are held constant at their reference levels, indicates that female candidates face significantly lower log-odds of being elected compared to male candidates in earlier years. However, the positive coefficient for the interaction term **`gender1 × election_year`** (0.02, SE = 0.00) demonstrates that this gender disparity diminishes over time, with female candidates experiencing a gradual improvement in election outcomes in more recent years.

The strong positive coefficient for **`incumbent1`** (2.19, SE = 0.02) show incumbent male candidate have a higher log-odds of election success compare to non-incumbent male, highlights the significant advantage incumbency provides to candidates. Yet, the interaction term **`gender1 × incumbent1`** (-0.34, SE = 0.05) shows that female incumbents benefit less from this advantage compared to their male counterparts, indicating a differences in how incumbency influences electoral success across genders.

Overall, the model highlights the evolving dynamics of gender and election success, emphasizing the importance of considering interaction effects to capture the complexity of these relationships. While the main effect of `gender` suggests a disadvantage for female candidates, the positive interaction with `election_year` shows that this gap has been gradually narrowing. Additionally, while incumbency benefits both genders, male candidates gain a marginally higher advantage from incumbency compared to female candidates.



## Predicted Probabilities of Being Elected Over Time for Male and Female Candidates
```{r}
#| label: fig-result1
#| fig-cap: "Predicted probabilities of election success (1910–2022) for male and female candidates, by incumbent status, highlight evolving gender dynamics: incumbency is strongly linked to higher success rates, and female success rates have increased over time, recently surpassing those of males."
#| echo: false
#| warning: false
#| message: false

# Load required libraries
# library(ggplot2)

# Calculate predicted probabilities
test_data$predicted_prob <- predict(model, newdata = test_data, type = "response")


# facet line plot
ggplot(test_data, aes(x = election_year, y = predicted_prob, color = as.factor(gender))) +
  geom_line(size = 1.2) +
  facet_wrap(~incumbent, labeller = labeller(incumbent = c("0" = "Not Incumbent", "1" = "Incumbent"))) +
  scale_color_manual(values = c("blue", "pink"), labels = c("Male", "Female")) +
  labs(
    x = "Election Year",
    y = "Predicted Probability",
    color = "Gender"
  ) +
  theme_minimal() +
  theme(
    legend.position = "bottom"
  )


```
In (@fig-result1), for non-incumbents, the predicted probability of election for female candidates has steadily increased over time, eventually surpassing that of male candidates in recent years. This trend suggests significant progress toward gender parity for non-incumbent candidates. On the other hand, among incumbents, the probability of election for female candidates has consistently increased at a steeper rate than for male candidates, eventually reaching parity. Male candidates exhibit relatively stable probabilities over time in both categories, with a slight upward trend. The results highlight a historical disadvantage for female candidates in elections but demonstrate considerable progress toward achieving greater gender equity in recent years.


## Gender Gap in Predicted Election Probability Over Time
```{r}
#| label: fig-result2
#| fig-cap: Gender gap in predicted probability of being elected (Male - Female) over time, illustrating changes in gender disparities in electoral success across election years. Gaps in the plot reflect missing data for specific gender-election year combinations.
#| echo: false
#| warning: false
#| message: false

# Aggregate predictions by gender and election year
gender_gap_data <- test_data |>
  group_by(gender, election_year) |>
  summarise(predicted_prob = mean(predicted_prob), .groups = "drop") |>
  spread(key = gender, value = predicted_prob) |>
  mutate(gap = `0` - `1`)  # Male (0) - Female (1)


# Plot gender gap
ggplot(gender_gap_data, aes(x = election_year, y = gap)) +
  geom_line(color = "darkred", size = 1.5) +
  labs(
    x = "Election Year",
    y = "Gender Gap (Male - Female)"
  ) +
  theme_minimal()

```
@fig-result2 provides a detailed visualization of the gender gap in predicted probabilities of being elected (Male - Female) over time, capturing shifts in disparities across election years. The gender gap demonstrates a consistent decreasing trend, particularly in recent decades, indicating a narrowing difference in predicted election probabilities between male and female candidates. This reflects progress in reducing gender-based disparities in municipal election outcomes.

The missing segments in the plot correspond to years where data for either male or female candidates were insufficient or unavailable, highlighting potential dataset limitations, especially due to the historically lower participation of female candidates in earlier elections. Overall, the plot underscores the study's focus on examining evolving gender dynamics in electoral success, showing both progress toward gender parity and the existence of historical inequities.

## Predicted Probabilities by Gender and Incumbency
```{r}
#| label: fig-result3
#| fig-cap: Predicted probabilities of being elected for male and female candidates are shown by incumbency status. Highlights notable differences in election probabilities between incumbents and non-incumbents across genders. Female candidates exhibit higher predicted probabilities than male candidates in both categories, with incumbents showing significantly elevated probabilities of election success regardless of gender.
#| echo: false
#| warning: false
#| message: false

# Aggregate predicted probabilities by gender and incumbency
gender_incumbency_probs <- test_data |>
  group_by(gender, incumbent) |>
  summarise(mean_prob = mean(predicted_prob, na.rm = TRUE), .groups = "drop")

# Plot predicted probabilities by incumbency
ggplot(gender_incumbency_probs, aes(x = as.factor(incumbent), y = mean_prob, fill = as.factor(gender))) +
  geom_bar(stat = "identity", position = "dodge") +
  labs(
    title = "Predicted Probabilities of Election by Gender and Incumbency",
    x = "Incumbency Status",
    y = "Predicted Probability",
    fill = "Gender"
  ) +
  scale_fill_manual(values = c("blue", "pink"), labels = c("Male", "Female")) +
  theme_minimal()

```
@fig-result3 displays the predicted probabilities of election for male and female candidates, separated by incumbency status. Among non-incumbents, female candidates show a higher predicted probability of being elected compared to male candidates, highlighting a notable gender advantage in this category. In contrast, for incumbents, the predicted probabilities are more balanced between genders, with female candidates having a slight edge. These results illustrate how incumbency status interacts with gender to influence electoral success, with incumbency narrowing the gender gap observed in non-incumbent candidates. 

## Predictive Ability of the Model for Future Elections
The logistic regression model demonstrates its utility in predicting future election outcomes by achieving an Area Under the ROC Curve (AUC) of 0.7414. This AUC value indicates that the model has a reasonable ability to distinguish between successful and unsuccessful candidates based on the predictors. But the matrix show that the model do better in predicting not elected rather than elected. Detail provided in @sec-model-details.

These results suggest that the model can be used to predict the likelihood of a candidate's success in future Canadian municipal elections. It provides a practical tool for analyzing how gender, incumbency, and their interactions influence election probabilities over time. However, we should be careful in use it for prediction since it perform better in predict failure rather than success in a election.


# Discussion {#sec-discussion}

## Overview: Gender Dynamics and Incumbency in Canadian Municipal Elections
This study explored how gender and incumbency status shape election outcomes in Canadian municipal elections, emphasizing trends over time and differences in incumbency advantages between male and female candidates. The results demonstrate a narrowing gender gap, indicating progress toward equity in electoral success. This shift reflects broader societal changes, such as increased advocacy for gender representation in politics and evolving voter attitudes toward female leadership. However, the persistence of historical disadvantages for female candidates highlights the ongoing need to address structural barriers, such as biases in campaign funding and media coverage.

The interaction effects in the model suggest that while incumbency remains a critical predictor of success, it benefits male candidates more consistently than female candidates. This disparity may point to additional challenges female incumbents face, such as heightened scrutiny or fewer resources for re-election campaigns. These findings call for further investigation into why incumbency advantages vary by gender and how interventions can ensure equitable access to the benefits of incumbency for all candidates.

## Implications for Gender Dynamics
The observed narrowing of the gender gap in election probabilities (@fig-result2) indicates significant progress toward gender equity in the Canadian municipal elections over the past century. Historically, female candidates faced substantial disadvantages, but recent trends suggest increasing voter support for first-time female candidates. This aligns with findings from the World Economic Forum's Global Gender Gap Report 2024 [@GlobalGenderGapReport2024], which notes that gender parity in parliamentary representation has reached a record high of 33%, nearly doubling since 2006. 

However, the reduced incumbency advantage for female candidates highlights persistent challenges. Female incumbents may encounter difficulties in maintaining voter support due to biases in public perception, resource allocation, or systemic barriers such as unequal access to campaign funding or media coverage. Research [@StrategicGenderBias] indicates that incumbency advantages can constrain female political representation, as parties may exhibit strategic gender bias, favoring male incumbents. This suggests that while progress has been made in leveling the playing field for female candidates entering politics, structural inequalities persist, particularly for female incumbents seeking re-election. Addressing these disparities is essential to achieving full equity in political representation. 


## Practical Implications for Policy and Practice
The model's results have practical applications for policymakers and electoral strategists. The narrowing gender gap indicates that efforts to promote female participation in politics are yielding measurable benefits. However, challenges faced by female incumbents suggest the need for targeted interventions to support women in retaining office. Implementing mentorship programs, such as those provided by organizations like WINGS for Growth [@WINGS], can empower women leaders through structured mentorship, leadership workshops, and networking opportunities.  Additionally, media training to counter biases and financial assistance to address funding disparities could help female incumbents compete on a level playing field and secure reelection, ensuring greater continuity and representation of women in leadership roles.

Beyond gender dynamics, the study underscores the strong influence of incumbency on electoral outcomes, with incumbents of both genders consistently enjoying a significant advantage. While incumbency provides benefits such as name recognition and experience, it can also entrench existing power structures and reduce electoral competition. Policymakers might consider reforms like term limits, stricter campaign finance regulations, or enhanced support for non-incumbent candidates to foster a more competitive and inclusive electoral landscape. For instance, research [@StanfordIncumbency] indicates that incumbency leads to a substantial increase in campaign contributions, creating a financial advantage that precedes and amplifies the electoral incumbency advantage.  Addressing these issues could promote diversity and innovation in political leadership while ensuring a fair balance between experience and renewal in public office. 


## Limitations of the Study
This paper has several limitations that affect the accuracy in interpretation of relationship and prediction. One limitation lies in the potential multicollinearity between gender and its interaction terms, particularly the interaction with `election_year`. Multicollinearity can inflate standard errors, complicating the interpretation of coefficients and reducing the reliability of individual parameter estimates. Although the model effectively captures interaction effects, the presence of multicollinearity may obscure the strength and direction of relationships, requiring caution in drawing conclusions about individual predictors.

Another limitation of this study is the choice of a frequentist logistic regression model instead of a Bayesian approach. A Bayesian logistic regression model with default normal priors (mean of 0 and standard deviation of 2.5) could provide several advantages. These priors are relatively non-informative, allowing the data to primarily shape the posterior distributions unless the evidence strongly suggests otherwise. Additionally, moderately wide priors can regularize the model, helping to reduce issues such as high multicollinearity and the risk of overfitting. This approach could yield more stable coefficient estimates.

Although the dataset is extensive and spanning over a century, it lacks key variables that could provide a more comprehensive understanding of electoral dynamics. For example, the absence of campaign funding data, voter demographics, and political party affiliations limits the study's ability to account for contextual factors that significantly influence election outcomes. These unobserved variables may interact with gender and incumbency in ways not captured by the model, leading to potentially incomplete explanations of observed trends.

Another limitation is the model's predictive performance. While the matrix (@tbl-matrix) indicates that the model performs well in predicting electoral failure, its ability to accurately predict electoral success is weaker. This imbalance may reflect inherent biases in the dataset, such as the underrepresentation of successful female candidates or systematic challenges in capturing the nuanced factors that drive election success. This limitation underscores the need to refine the model or explore alternative methods to improve predictive accuracy, particularly for elected candidates.


## Future Research Directions
Future research could explore additional predictors to refine the understanding of electoral success. Variables such as socioeconomic factors, voter turnout, and candidate campaign strategies might provide deeper insights into the mechanisms driving election outcomes. For example, examining disparities in campaign funding or media coverage could illuminate structural barriers that disproportionately affect female or non-incumbent candidates. Incorporating qualitative data, such as interviews with candidates, may also offer a richer perspective on the challenges female candidates face, complementing the quantitative trends observed in this study.

Expanding the analysis to other political contexts, such as elections in other countries or at different levels of government, could provide a comparative framework to assess whether the patterns identified in Canadian municipal elections are consistent globally or reflect unique local dynamics. Furthermore, studying longitudinal data on individual candidates to tracking their participation and outcomes across multiple election cycles could help uncover sustained trends in gender equity and identify factors influencing long-term electoral success. These directions would strengthen the broader understanding of gender dynamics and incumbency in elections.

\newpage

\appendix

# Appendix: Measurement, Observational data and Idealized methodology {#sec-appendix1}
The CMED used in this study is a comprehensive observational dataset covering over 150 years of Canadian municipal elections, compiled from provincial archives, municipal records, and newspapers to capture electoral trends. This appendix explores the dataset's measurement, observational nature, potential biases, and evaluates its strengths and limitations. Additionally, a survey was designed to examine how demographic factors, including gender, influence the average election success rate in Canada.

## Measurement details
### Data Sources and Collection Methods
CMED integrates data from:

  - **Primary Sources**: Provincial and municipal organizations like CivicInfoBC and Données Québec, alongside historical archives from cities such as Toronto and Montreal.

  - **Secondary Sources**: Online repositories, municipal websites, and regional election offices were used to supplement gaps, particularly for smaller municipalities.

Collection methods evolved over time:

  - **Early Records**: Information was sparse, particularly for gender and incumbency. For example, in early elections where gender information was unavailable, researchers manually coded gender by analyzing candidates' photographs from archival election posters or identifying pronouns in written descriptions.

  - **Recent Records**: Post-2000 data benefitted from standardized practices, such as manual digitization from archives (e.g., Toronto, Montreal) and use of online resources for contemporary elections (e.g., CivicInfoBC, Données Québec). IT ensuring more reliable and complete information, particularly in provinces like British Columbia and Quebec.

### Regional and Temporal Variability
  - **Provincial Differences**: Provinces with centralized databases, such as British Columbia and Quebec, have more comprehensive records. Smaller provinces often have less consistent data due to decentralized practices.

  - **Municipality Size**: Larger municipalities are better represented due to better archival systems, while smaller ones, especially in earlier years, may be underrepresented or entirely missing. For example, in smaller municipalities, even election results may be incomplete, and only partial lists of candidates or winners could be retrieved from local newspapers or unofficial records.

### Implications
1. **Strengths**:
   - CMED consolidates extensive election data, offering a view of Canadian municipal politics.
   - Standardized data practices in recent years ensure high-quality information for contemporary analyses.

2. **Limitations**:
   - Historical and regional inconsistencies, particularly for small municipalities and early records, could bias analyses.
   - Manual gender coding in older data introduces potential for error and subjectivity.
   - The underrepresentation of smaller municipalities may skew findings related to rural-urban dynamics or trends over time. For example some provinces like Quebec are overrepresented, while other smaller territories have limited data.
   - As an observational dataset, the CMED cannot account for unmeasured variables like campaign funding or voter turnout, which may influence election outcomes.



## Observational Data and implications
The **Canadian Municipal Elections Database (CMED)** is an observational dataset that captures real-world electoral outcomes without experimental manipulation. While it enables analysis of relationships between variables such as gender, incumbency, and election success, it does not establish causality. For instance, observed gender disparities in election outcomes could be influenced by unmeasured factors like regional attitudes toward female leadership or voter demographics, which are not included in the dataset.

Potential confounders such as campaign funding and media coverage, also play significant roles in electoral success but are absent from CMED. As noted by [@SpringerMediaAttention], the absence of media coverage data in CMED limits the ability to fully account for factors influencing electoral success. Additionally, campaign spending has been shown to influence election outcomes, as increased financial resources can enhance a candidate's visibility and voter outreach [@EmoryCampaignSpending]. The absence of these variables in CMED means that analyses may conflate the effects of gender with other underlying factors, potentially biasing the results.

Despite these limitations, CMED provides a valuable foundation for identifying trends and patterns in electoral behavior. It offers a basis for future research that incorporates additional variables or employs experimental designs to explore causal relationship. For example, future research can consider integrating additional contextual variables, such as voter turnout, campaign funding, and party affiliations, to provide a better understanding of electoral success. 


## Idealized Methodology: Survey
### Overview
This survey designed to collect data on factors influencing municipal election outcomes in Canada, with a focus on gender dynamics and the impact of incumbency. Using a hypothetical budget of $75,000, the methodology combines survey-based candidate and voter data with archival election records. The goal is to create a dataset that captures the multifaceted aspects of electoral success, including demographics, voter perceptions, campaign strategies, and municipal contexts.

### Data Collection Approach

#### Candidate Surveys

**Objective**: Gather detailed information on candidates’ demographics, campaign strategies, and perceptions of electoral challenges.

**Survey Details**:

- **Key Variables**: Gender, age, campaign funding, previous office experience, party affiliation, media coverage, and voter engagement.

- **Sample Size**: Target 5000 candidates across various municipalities, stratified by gender, incumbency, and municipality size.

- **Distribution**: Surveys will be distributed through municipal offices, email invitations, and professional networks.

#### Voter Surveys

**Objective**: Understand voter perceptions and preferences regarding male and female candidates.

**Survey Details**:

- **Key Variables**: Voter demographics (gender, age, education), attitudes toward female candidates, incumbency preferences, and voting behavior.

- **Sample Size**: Target 10,000 respondents, ensuring representation across provinces and urban/rural areas.

- **Recruitment**: Use online survey panels and social media advertising to reach diverse demographics.

#### Archival Election Records

**Objective**: Supplement survey data with historical election results and contextual information.

**Sources**:
- Municipal and provincial archives for official election results.
- Media archives for campaign coverage.


### Sampling Approach

#### Stratified Sampling

To ensure representativeness, the sampling strategy will stratify by:

- **Municipality Size**: Small, medium, and large municipalities.

- **Province**: To capture regional diversity.

- **Candidate Characteristics**: Gender and incumbency status.

#### Sample Size and Justification

- **Candidates**: A 5000-candidates sample to ensures reliable analyses of gender-incumbency interactions.
- **Voters**: A 10,000-voter sample provides statistical reliability and captures diverse opinions across demographics.

### Data Validation and Quality Control

1. **Cross-Verification**: Match candidate responses with archival election records to validate accuracy.
2. **Attention Checks**: Include control questions in voter surveys to ensure attentiveness.
3. **Consistency Analysis**: Cross-check voter responses for logical inconsistencies.
4. **Media Cross-Reference**: Validate reported media coverage using digital news archives.

### Hypothetical Budget Allocation

- **Candidate Surveys**: $20,000
- **Voter Surveys**: $30,000
- **Archival Research**: $15,000
- **Data Validation and Cleaning**: $10,000

### Implementation Plan

1. **Survey Design and Pilot Testing**: Months 1-2
2. **Survey Distribution and Archival Research**: Months 3-6
3. **Data Cleaning and Validation**: Months 7-8
4. **Analysis and Reporting**: Months 9-10


### Survey Structures and Example Questions
#### Candidate Surveys
**Purpose**: To collect detailed information about candidates’ demographics, campaign strategies, and their experiences in municipal elections.

**Survey Introduction**:

Welcome! 

We are conducting a survey to explore how demographic factors impact election success in Canadian municipal elections. Your response is valuable and will support research on gender equality in politics.  

Please note:

- Your responses are completely confidential and used solely for research purposes.  
- Participation is voluntary, and you can withdraw at any time.  
- The survey takes about 15 minutes to complete.  

If you have questions or concerns, feel free to reach out to our research team at [nanalovely1202@gmail.com](mailto:nanalovely1202@gmail.com).  

**Structure**:

1. **Demographics**  
   - Collect information on candidates’ gender, age, ethnicity, and education.
   **Example Questions**:  
     - *What is your gender?*  
       - Male / Female / Non-binary / Prefer not to say  
     - *What is your highest level of education completed?*  
       - High school / Associate’s degree / Bachelor’s degree / Master’s degree / Doctorate / Other  

2. **Election Context**  
   - Gather data on candidates’ incumbency status, office sought, and past political experience.  
   **Example Questions**:  
     - *Are you the incumbent for the office you are contesting?*  
       - Yes / No  
     - *Have you held any public office before? If yes, please specify.*  
       - [Open-ended response]  

3. **Campaign Details**  
   - Obtain insights into candidates’ campaign strategies, funding, and challenges.  
   **Example Questions**:  
     - *What was your total campaign budget?*  
       - [Numeric response in CAD]  
     - *What were your top three priorities during the campaign?*  
       - [Open-ended response]  
     - *Did you face any barriers during your campaign due to your gender? If yes, please explain.*  
       - [Open-ended response]  

4. **Perceptions and Outcomes**  
   - Understand candidates’ perspectives on their electoral performance and challenges.  
   **Example Questions**:  
     - *What do you believe was the most significant factor in your election outcome?*  
       - [Open-ended response]  
     - *On a scale of 1 to 5, how would you rate the fairness of media coverage you received?*  
       - 1 (Very unfair) to 5 (Very fair)  

**End part**

Thank you for your participation!

If you have any questions or need further information about this research, don’t hesitate to reach out to us at [nanalovely1202@gmail.com](mailto:nanalovely1202@gmail.com).


#### Voter Surveys
**Purpose**: To assess voter attitudes and behaviors, particularly regarding gender and incumbency in municipal elections.

**Survey Introduction**:

Welcome! 

We are conducting a survey to explore how demographic factors impact election success in Canadian municipal elections. Your response is valuable and will support research on gender equality in politics.  

Please note:

- Your responses are completely confidential and used solely for research purposes.  
- Participation is voluntary, and you can withdraw at any time.  
- The survey takes about 15 minutes to complete.  

If you have questions or concerns, feel free to reach out to our research team at [nanalovely1202@gmail.com](mailto:nanalovely1202@gmail.com).  

**Structure**:

1. **Demographics**  
   - Collect voters’ age, gender, ethnicity, education level, and income range.  
   **Example Questions**:  
     - *What is your age?*  
       - Under 18 / 18–24 / 25–34 / 35–44 / 45–54 / 55–64 / 65+  
     - *What is your highest level of education completed?*  
       - High school / Associate’s degree / Bachelor’s degree / Master’s degree / Doctorate / Other  

2. **Voting Behavior**  
   - Capture voters’ participation and decision-making in recent municipal elections.  
   **Example Questions**:  
     - *Did you vote in the most recent municipal election?*  
       - Yes / No  
     - *Which of the following best describes how you chose your candidate?*  
       - Based on party affiliation / Based on campaign promises / Based on personal characteristics (e.g., gender, ethnicity) / Other  

3. **Attitudes Toward Gender and Leadership**  
   - Assess voter perceptions of gender’s role in leadership and electoral success.  
   **Example Questions**:  
     - *Do you believe gender affects a candidate’s chances of winning an election?*  
       - Yes / No / Not sure  
     - *On a scale of 1 to 5, how much do you value having women in leadership positions?*  
       - 1 (Not at all) to 5 (Very much)  

4. **Preferences for Incumbents vs. Challengers**  
   - Gauge voter attitudes toward incumbency and its advantages.  
   **Example Questions**:  
     - *How often do you vote for an incumbent candidate?*  
       - Always / Often / Sometimes / Rarely / Never  
     - *Do you believe incumbents have an unfair advantage in elections?*  
       - Yes / No / Not sure  

**End part**

Thank you for your participation!

If you have any questions or would like more information about this research, please feel free to contact us at [nanalovely1202@gmail.com](mailto:nanalovely1202@gmail.com).

#### Survey Implementation Notes
- Both surveys will include attention check questions to ensure data quality. 

- Surveys will be mobile-friendly and available in English and French for accessibility.  

- Responses will be anonymized to maintain confidentiality and encourage honest participation.  

#### Integration with Dataset
Survey responses will complement archival election data, providing a richer context to analyze gender dynamics, voter behavior, and election outcomes. By linking survey insights with candidate and voter demographics, the methodology will enable more reliable modeling of factors influencing municipal election success.

### Conclusion
This idealized methodology combines candidate and voter surveys with archival data to build a dataset capable of addressing complex questions about gender dynamics and other factors affect electoral success in Canadian municipal elections. By integrating diverse data sources and ensuring methodological reliability, this approach would provide deeper understanding into the structural and social factors shaping election outcomes.



# Additional data details {#sec-data-details}

## Data cleaning processes

After extract Achieved format of raw data [@CMED] from Borealis website. I prepare the raw data for analysis using several R packages. Including **`tidyverse`** for data manipulation and transformation, **`janitor`** for cleaning column names, **`dplyr`** for selecting and mutating variables, and **`rsample`** for splitting the dataset into training and test sets.

The analysis examines the effects of demographic factors, such as gender and incumbency status, on election outcomes. To prepare the data, I first used the **`janitor::clean_names()`** function to standardize column names into a consistent format. Then, I selected relevant columns, including `race_id`, `first_name`, `last_name`, `municipality`, `gender`, `elected`, `incumbent`, `election_year`, and `province`. Among these, `gender`, `incumbent`, and `election_year` were chosen as predictor variables, while `elected` was designated as the response variable in the regression model. The `first_name` and `last_name` columns were retained for a later step to remove duplicate rows using **`dplyr::distinct()`**, ensuring data consistency. Also, Observations with missing values were removed using **`tidyr::drop_na()`**.

To enhance clarity for model building and data analysis, the `gender` variable, initially represented by 'M' and 'F' (indicating male and female), was recoded into binary values using the **`mutate()`** function: `1` for female candidates and `0` for male candidates. Additionally, the `incumbent` and `elected` columns were converted to factors, ensuring appropriate data types for analysis. The levels of the `elected` variable were reordered to `0` (not elected) and `1` (elected) to ensure clarity in logistic regression modeling.

For model validation, the cleaned dataset was randomly split into training (70%) and testing (30%) sets using **`rsample::initial_split()`**, with a fixed random seed to ensure reproducibility. These splits provided a foundation for model fitting and validation.

Given the absence of female candidates in Canadian municipal elections before 1910, only elections after this year were included in the training and testing datasets. This decision ensured balanced representation for gender-based analysis. Focusing on data from 1910 to 2022 aligns with the study's aim to investigate how candidates' gender affects election success. Additionally, the extensive dataset spanning over a century offers a unique opportunity to analyze trends in the evolving gender gap over a long period.

Finally, I saved the cleaned dataset and the training/testing splits in CSV and Parquet formats using **`arrow** [@arrow], facilitating efficient storage and future accessibility.

## Cleaned dataset 
```{r}
#| echo: false
#| warning: false
#| message: false
#| label: tbl-clean
#| tbl-cap: Cleaned dataset before spliting into train and test dataset

# library(kableExtra)

# Display a cleaner table
head(data) |>
  kable(
    caption = "Cleaned dataset before splitting into train and test dataset",
    col.names = c("Race ID", "First", "Last", "City", "Gender", "Elect", "Incumb", "Year", "Prov")
  ) |>
  kable_styling(bootstrap_options = c("striped", "condensed"), full_width = FALSE, font_size = 8)


```
@tbl-clean provides a glimpse of the cleaned dataset before spliting into train and test data.

# Model details: summary, validation and checking {#sec-model-details}
## Model Summary
```{r}
#| echo: false
#| warning: false
#| message: false
#| label: tbl-model-coefficients
#| tbl-cap: Summary of the model

# Extract coefficients
coefficients <- broom::tidy(model, conf.int = TRUE)
coefficients |> kable(digits = 2)
```

@tbl-model-coefficients presents my logistic regression model's coefficients alongside their standard errors and 95% credible intervals. The standard error (SE) indicates how accurately a sample statistic represents the corresponding population parameter, reflecting the variability of sample estimates around the true population value.

## Train Test Validation
```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false

# Convert probabilities to binary predictions (threshold = 0.5)
test_data$predicted_class <- ifelse(test_data$predicted_prob > 0.5, 1, 0)

```

```{r}
#| label: tbl-matrix
#| tbl-cap: A Matrix justify the prediction of the model:Evaluate the model’s performance for both "elected-1" and "not elected-0" cases.
#| echo: false
#| warning: false
#| message: false

confusion <- table(
  Actual = factor(test_data$elected, levels = c(0, 1), labels = c("Not Elected", "Elected")),
  Predicted = factor(test_data$predicted_class, levels = c(0, 1), labels = c("Not Elected", "Elected"))
)

# Display the matrix with labels
knitr::kable(confusion)

```

```{r}
#| echo: false
#| warning: false
#| message: false
accuracy <- sum(diag(confusion)) / sum(confusion)
```

```{r}
#| echo: false
#| warning: false
#| message: false
null_deviance <- model$null.deviance
residual_deviance <- model$deviance
mcfadden_r2 <- 1 - (residual_deviance / null_deviance)

```

```{r}
#| label: fig-roc
#| fig-cap: ROC Curve for the logistic regression model, illustrating the trade-off between sensitivity and specificity, with an AUC of 0.7414 reflecting a fair level of discriminatory accuracy in predicting election outcomes.
#| echo: false
#| warning: false
#| message: false


# Load required library
# library(pROC)

# Generate ROC curve
roc_curve <- roc(test_data$elected, test_data$predicted_prob)

# Plot the ROC curve
plot(
  roc_curve,
  main = "ROC Curve",
  col = "blue",
  lwd = 2
)

# Add AUC to the plot
legend("bottomright", legend = paste("AUC =", round(auc(roc_curve), 4)), col = "blue", lwd = 2)

```

A train-test split validation approach was employed to evaluate the performance of the logistic regression model in predicting the probabilities of being elected in Canadian municipal elections. The dataset was randomly divided into a training set (70%) for model fitting and a test set (30%) for evaluation.

The model was fitted using the `glm()` function on the training data, and predictions were generated for the test set. A matrix (@tbl-matrix) highlights the model's strengths and weaknesses: it performs well in predicting "Not Elected" but has greater difficulty predicting "Elected," likely reflecting data imbalance or complexities in modeling election dynamics.

Three key performance metrics were calculated:

- **Accuracy:** 70.92%, indicating that the model correctly classifies about 70% of the test set observations. However, accuracy alone may not fully capture model performance, especially if the dataset is imbalanced (e.g., more "Not Elected" cases than "Elected").

- **McFadden's R^2:** 0.16, suggesting a modest model fit. While lower than R square values typically observed in linear regression, this is acceptable in logistic regression, where values between 0.2 and 0.4 are considered strong.

- **ROC Curve and AUC:** 0.7414, The ROC curve (@fig-roc) evaluates the model's ability to distinguish between elected and non-elected candidates, with an AUC of 0.7414 indicating a fair level of discriminatory power.

Overall, the validation indicators indicate that the model is reasonably effective in predicting election outcomes based on gender, incumbency, and interactions, aligning with the study's objective of analyzing the factors influencing electoral success. Though there may be limitations in capturing the factors influencing election success.

## Residual plot:
```{r}
#| label: fig-residual
#| fig-cap: "Showing residuals vs. fitted values for the logistic regression model, indicating a reasonable fit with minor deviations at extreme fitted values."
#| echo: false
#| warning: false
#| message: false

# Load arm package
# library(arm)

# Generate binned residual plot
binnedplot(
  fitted(model), 
  residuals(model, type = "response"), 
  xlab = "Fitted Values", 
  ylab = "Residuals", 
  main = "Binned Residual Plot"
)

```
@fig-residual evaluates the goodness-of-fit of the logistic regression model by examining the relationship between fitted values and residuals. In this plot, most residuals cluster around the horizontal dashed line at zero, indicating that the model's predictions align well with observed outcomes. There are no obvious systematic patterns or trends, which suggests that the model effectively captures the relationship between predictors and the outcome variable. However, there is noticeable variability at the extremes of the fitted values (near 0.2 and 0.8), which may indicate potential issues with model accuracy for these ranges. This could result from fewer observations at these extremes or limitations in the model's ability to capture the underlying patterns. Overall, the lack of significant deviations or systematic biases in residuals supports the model's validity, while the observed variability at the edges highlights areas where the model might be improved, such as through additional predictors or interaction terms. This plot provides evidence that the model is appropriate for addressing the research aim of analyzing the effects of gender and incumbency on election outcomes.


## Check Multicollinearity
```{r}
#| label: tbl-vif
#| tbl-cap: Variance Inflation Factor (VIF) values for the predictors in the logistic regression model.
#| echo: false
#| warning: false
#| message: false

# library(car)
# library(knitr)
# library(kableExtra)

# VIF table
vif(model)

```
@tbl-vif shows the **Variance Inflation Factor (VIF)** values which measure potential multicollinearity in the model. The high VIF for `gender` (\(147.19\)) and the interaction term `gender:election_year` (\(12.13\)) reflects a common characteristic of models with interaction terms, as base variables like `gender` inherently overlap with their interactions. This multicollinearity does not invalidate the model but highlights the trade-off between capturing relationships and increased variable dependency. Notably, `incumbent` (\(1.15\)) and `gender:incumbent` (\(1.26\)) exhibit low VIF values, suggesting little collinearity for these predictors. The inclusion of interaction terms is central to this study’s aim of examining gender and incumbency effects over time and across contexts, making the added complexity from multicollinearity both anticipated and justified. This ensures the model effectively captures the evolving dynamics of electoral outcomes, aligning with the research objectives.

\newpage


# References


